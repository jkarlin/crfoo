<head>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.9-1/core.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.9-1/md5.min.js"></script>
</head>
<body style="background-color: #e1e1e1; padding: 16px; font-size: 14px; font-family: Roboto, Arial, sans-serif; color: #777">
  <div style="text-align: center; width: 100%; font-size: 18px;">Advertisement</div>
<p> This frame is generating a large number of hashes</p>
<p> Hashes generated: <span style="font-weight: 700; color: black" id="hashes">0</span></p>
<p> Recent hash: <span id="hash"></span></p>
<img src="output.dat"/>
</body>
<script>
  let observer = new ReportingObserver(function(reports,observer) {
      console.log("SUBFRAME**************************");
      //console.log(reports);
      console.log(reports[0].body);
    },{buffered: true});
  observer.observe();
  
  window.addEventListener("beforeunload", function(event) {console.log("Sub frame before unload: " + event)});
  window.addEventListener("unload", function(event) {
    console.log("Sub frame unload: " + event);
    let reports = observer.takeRecords();
    if (reports.length() > 0)
      console.log(observer.takeRecords()[0].body);
  });
  
  //window.navigator.vibrate(200);
</script>
